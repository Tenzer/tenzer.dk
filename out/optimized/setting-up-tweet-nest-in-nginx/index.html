<!DOCTYPE html><html lang=en><head prefix="og: http://ogp.me/ns#"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Setting up Tweet Nest in Nginx - Tenzer.dk</title><meta name=description content="The personal website and blog for Jeppe Toustrup about open source technologies and photography."><meta name=generator content="Hugo 0.37"><style>body{background-color:#ecf0f1;color:#2c3e50;font-family:Georgia,serif;font-size:20px;line-height:1.6em;margin:0}a{color:#e74c3c;text-decoration:none}a h1{color:#2c3e50}hr{color:#8c97a1}header{background:#2c3e50;color:#ecf0f1;text-align:left}.header-container{margin:auto;max-width:700px;padding:10px}#logo{margin:10px 0;max-height:60px;max-width:100%}nav{display:-webkit-flex;display:flex;font-size:1rem;margin-bottom:20px;max-width:400px}nav a{color:#e74c3c}nav a,nav span{-webkit-flex:1;flex:1}nav span.disabled{color:#8c97a1}.container{background-image:linear-gradient(rgba(44,62,80,.4),rgba(44,62,80,0));background-image:-webkit-linear-gradient(top,rgba(44,62,80,.4),rgba(44,62,80,0));background-repeat:repeat-x;background-size:auto 20px;padding-top:20px}.content{margin:auto;max-width:700px;padding:0 10px}.content img{display:block;margin:auto;max-width:100%}.posted-date{color:#8c97a1;font-size:1rem;margin-top:0}h1{line-height:1;margin-bottom:.5rem}pre{border:1px dashed #cfd9db;line-height:1.25em;max-width:700px;overflow:auto;padding:5px 10px}pre code{background-color:inherit;border:none;padding:0}code{background-color:#f5f7f7;border:1px dashed #cfd9db;padding:5px}blockquote{border-left:3px solid #507192;color:#3e5871;font-style:italic;margin-left:20px;padding-left:10px}ul li{list-style-type:circle}.admonition-title{font-weight:700}.admonition{border:1px solid #2c3e50;border-radius:3px;margin:20px 0;padding:0 5px}.admonition p:first-child{margin-top:5px}.admonition p:last-child{margin-bottom:5px}.admonition.attention,.admonition.warning{background-color:#ffd34e}[data-expounder-c],[data-expounder]{text-decoration:none;border-bottom:1px dashed;cursor:pointer}@keyframes expoundedFadeIn{0%{opacity:0}to{opacity:1}}@keyframes expoundedFadeOut{0%{opacity:1}to{opacity:0}}[data-expounded]{display:none}[data-expounded].expounded-appear{display:initial;animation:expoundedFadeIn 1s}[data-expounded].expounded-disappear{display:initial;animation:expoundedFadeOut 1s}footer{font-size:15px;margin:auto;max-width:700px;text-align:center}@media print{footer,header{display:none}}</style><link rel=logo href=/static/favicon.3dada7eb0a.svg type=image/svg+xml><link rel=icon href=/static/favicon.3dada7eb0a.svg sizes=any type=image/svg+xml><link rel=icon href=/static/favicon.e5c65e608b.png sizes=128x128 type=image/png><link rel=icon href=/static/favicon.copy.a23706216d.ico sizes="16x16 32x32 48x48 64x64" type=image/x-icon><link rel=alternate href=https://tenzer.dk/index.xml type=application/rss+xml title=Tenzer.dk><meta name=theme-color content=#2C3E50><meta property=og:type content=website><meta property=og:url content=https://tenzer.dk/setting-up-tweet-nest-in-nginx/ ><meta property=og:site_name content=Tenzer.dk><meta property=og:title content="Setting up Tweet Nest in Nginx - Tenzer.dk"><meta property=og:description content="Today I’ve set up Tweet Nest at tweets.tenzer.dk. Tweet Nest is a simple application that archives all your tweets, and make it easy to search for old tweets you’ve written that you might want to find again. Tweet Nest comes by default with .htaccess files containing an Apache mod_rewrite specific configuration, but since I’m using Nginx that configuration won’t work for me.
The mod_rewrite rules are limited to rules for handling requests to /sort, /favorites, /search and pages to show tweets for a specific month and day."><meta property=og:image content=https://tenzer.dk/images/logo.png><meta name=twitter:card content=summary><meta name=twitter:site content=@Tenzer><meta name=twitter:title content="Setting up Tweet Nest in Nginx - Tenzer.dk"><meta name=twitter:description content="Today I’ve set up Tweet Nest at tweets.tenzer.dk. Tweet Nest is a simple application that archives all your tweets, and make it easy to search for old tweets you’ve written that you might want to find again. Tweet Nest comes by default with .htaccess files containing an Apache mod_rewrite specific configuration, but since I’m using Nginx that configuration won’t work for me.
The mod_rewrite rules are limited to rules for handling requests to /sort, /favorites, /search and pages to show tweets for a specific month and day."><meta name=twitter:image content=https://tenzer.dk/images/logo.png></head><body><header><div class=header-container><a href=/ ><img id=logo src=/static/tenzerdk.90021cd24c.png alt="Tenzer.dk logo"></a></div></header><div class=container><div class=content><a href=/setting-up-tweet-nest-in-nginx/ ><h1>Setting up Tweet Nest in Nginx</h1></a><p class=posted-date>Posted on November 23, 2012</p><p>Today I’ve set up <a href=http://pongsocket.com/tweetnest/ >Tweet Nest</a> at <a href=http://tweets.tenzer.dk/ >tweets.tenzer.dk</a>. Tweet Nest is a simple application that archives all your tweets, and make it easy to search for old tweets you’ve written that you might want to find again. Tweet Nest comes by default with <code>.htaccess</code> files containing an Apache mod_rewrite specific configuration, but since I’m using <a href=http://nginx.org/ >Nginx</a> that configuration won’t work for me.</p><p>The mod_rewrite rules are limited to rules for handling requests to <code>/sort</code>, <code>/favorites</code>, <code>/search</code> and pages to show tweets for a specific month and day. In the .htaccess file they are specified as:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-apache data-lang=apache>RewriteEngine <span style=color:#66d9ef>On</span>
RewriteRule ^sort/?$ ./sort.php [L]
RewriteRule ^favorites/?$ ./favorites.php [L]
RewriteRule ^search/?$ ./search.php [L]
RewriteRule ^([0-9]+)/([0-9]+)/?$ ./month.php?y=$1&amp;m=$2
RewriteRule ^([0-9]+)/([0-9]+)/([0-9]+)/?$ ./day.php?y=$1&amp;m=$2&amp;d=$3</code></pre></div><p>I have replaced those with the following Nginx rules, which are specified within the <code>server {}</code> directive for the site:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nginx data-lang=nginx><span style=color:#66d9ef>rewrite</span> <span style=color:#e6db74>^/sort</span> <span style=color:#e6db74>/sort.php</span>;
<span style=color:#66d9ef>rewrite</span> <span style=color:#e6db74>^/favorites</span> <span style=color:#e6db74>/favorites.php</span>;
<span style=color:#66d9ef>rewrite</span> <span style=color:#e6db74>^/search</span> <span style=color:#e6db74>/search.php</span>;
<span style=color:#66d9ef>rewrite</span> <span style=color:#e6db74>^/([0-9]+)/([0-9]+)/([0-9]+)?</span> <span style=color:#e6db74>/day.php?y=</span>$1&amp;m=$2&amp;d=$3;
<span style=color:#66d9ef>rewrite</span> <span style=color:#e6db74>^/([0-9]+)/([0-9]+)?</span> <span style=color:#e6db74>/month.php?y=</span>$1&amp;m=$2;</code></pre></div><p>A few things to note:</p><ul><li>The <code>?</code> at the end of the regular expression rules in the final two rules, means any extra parameters given in the URL will be ignored.</li><li>With the regular expression rule I have defined for the month view, I need it to be below the rule for showing a specific day, otherwise the month rule will catch all requests to specific days as well. I could probably modify the rule to not do this, but I like how clear it looks here.</li></ul></div></div><footer>Copyright © 2018 <a href=https://twitter.com/Tenzer>Jeppe Toustrup</a> unless otherwise noted.</footer></body></html>