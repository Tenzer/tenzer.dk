<!DOCTYPE html><html lang=en><head prefix="og: http://ogp.me/ns#"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Guide: Docker Registry Frontend - Tenzer.dk</title><meta name=description content="The personal website and blog for Jeppe Toustrup about open source technologies and photography."><meta name=generator content="Hugo 0.37"><style>body{background-color:#ecf0f1;color:#2c3e50;font-family:Georgia,serif;font-size:20px;line-height:1.6em;margin:0}a{color:#e74c3c;text-decoration:none}a h1{color:#2c3e50}hr{color:#8c97a1}header{background:#2c3e50;color:#ecf0f1;text-align:left}.header-container{margin:auto;max-width:700px;padding:10px}#logo{margin:10px 0;max-height:60px;max-width:100%}nav{display:-webkit-flex;display:flex;font-size:1rem;margin-bottom:20px;max-width:400px}nav a{color:#e74c3c}nav a,nav span{-webkit-flex:1;flex:1}nav span.disabled{color:#8c97a1}.container{background-image:linear-gradient(rgba(44,62,80,.4),rgba(44,62,80,0));background-image:-webkit-linear-gradient(top,rgba(44,62,80,.4),rgba(44,62,80,0));background-repeat:repeat-x;background-size:auto 20px;padding-top:20px}.content{margin:auto;max-width:700px;padding:0 10px}.content img{display:block;margin:auto;max-width:100%}.posted-date{color:#8c97a1;font-size:1rem;margin-top:0}h1{line-height:1;margin-bottom:.5rem}pre{border:1px dashed #cfd9db;line-height:1.25em;max-width:700px;overflow:auto;padding:5px 10px}pre code{background-color:inherit;border:none;padding:0}code{background-color:#f5f7f7;border:1px dashed #cfd9db;padding:5px}blockquote{border-left:3px solid #507192;color:#3e5871;font-style:italic;margin-left:20px;padding-left:10px}ul li{list-style-type:circle}.admonition-title{font-weight:700}.admonition{border:1px solid #2c3e50;border-radius:3px;margin:20px 0;padding:0 5px}.admonition p:first-child{margin-top:5px}.admonition p:last-child{margin-bottom:5px}.admonition.attention,.admonition.warning{background-color:#ffd34e}[data-expounder-c],[data-expounder]{text-decoration:none;border-bottom:1px dashed;cursor:pointer}@keyframes expoundedFadeIn{0%{opacity:0}to{opacity:1}}@keyframes expoundedFadeOut{0%{opacity:1}to{opacity:0}}[data-expounded]{display:none}[data-expounded].expounded-appear{display:initial;animation:expoundedFadeIn 1s}[data-expounded].expounded-disappear{display:initial;animation:expoundedFadeOut 1s}footer{font-size:15px;margin:auto;max-width:700px;text-align:center}@media print{footer,header{display:none}}</style><link rel=logo href=/static/favicon.3dada7eb0a.svg type=image/svg+xml><link rel=icon href=/static/favicon.3dada7eb0a.svg sizes=any type=image/svg+xml><link rel=icon href=/static/favicon.e5c65e608b.png sizes=128x128 type=image/png><link rel=icon href=/static/favicon.copy.a23706216d.ico sizes="16x16 32x32 48x48 64x64" type=image/x-icon><link rel=alternate href=https://tenzer.dk/index.xml type=application/rss+xml title=Tenzer.dk><meta name=theme-color content=#2C3E50><meta property=og:type content=website><meta property=og:url content=https://tenzer.dk/guide-docker-registry-frontend/ ><meta property=og:site_name content=Tenzer.dk><meta property=og:title content="Guide: Docker Registry Frontend - Tenzer.dk"><meta property=og:description content="If you have your own private Docker registry you might be wanting some kind of frontend for it, as docker search [...] can only get you so far in regards to getting an overview of what the registry contains. Fortunately all the information you might want about the registry contents can be aquired through the REST API, making it possible to present the data neatly on a website.
Konrad Kleine has made the docker-registry-frontend project to do just that."><meta property=og:image content=https://tenzer.dk/images/logo.png><meta name=twitter:card content=summary><meta name=twitter:site content=@Tenzer><meta name=twitter:title content="Guide: Docker Registry Frontend - Tenzer.dk"><meta name=twitter:description content="If you have your own private Docker registry you might be wanting some kind of frontend for it, as docker search [...] can only get you so far in regards to getting an overview of what the registry contains. Fortunately all the information you might want about the registry contents can be aquired through the REST API, making it possible to present the data neatly on a website.
Konrad Kleine has made the docker-registry-frontend project to do just that."><meta name=twitter:image content=https://tenzer.dk/images/logo.png></head><body><header><div class=header-container><a href=/ ><img id=logo src=/static/tenzerdk.90021cd24c.png alt="Tenzer.dk logo"></a></div></header><div class=container><div class=content><a href=/guide-docker-registry-frontend/ ><h1>Guide: Docker Registry Frontend</h1></a><p class=posted-date>Posted on January 17, 2015</p><p>If you have your own <a href=/guide-private-docker-registry/ >private Docker registry</a> you might be wanting some kind of frontend for it, as <code>docker search [...]</code> can only get you so far in regards to getting an overview of what the registry contains. Fortunately all the information you might want about the registry contents can be aquired through the <a href=https://docs.docker.com/reference/api/registry_api/ >REST API</a>, making it possible to present the data neatly on a website.</p><p>Konrad Kleine has made the <a href=https://github.com/kwk/docker-registry-frontend>docker-registry-frontend</a> project to do just that. It’s a client-only AngularJS based web app which calls the Docker registry API directly and serves it up in a neat web interface (<a href=https://github.com/kwk/docker-registry-frontend/wiki/Features>screenshots here</a>).</p><p>While he does provide a <a href=https://github.com/kwk/docker-registry-frontend/blob/master/Dockerfile>Dockerfile</a> which builds and run the interface, I would rather just serve the files via the Nginx server which already run in front of the registry.</p><p>I am going to presume you have set up a private registry like described in <a href=/guide-private-docker-registry/ >my guide</a>. First you have to install the dependencies we need; Git for getting the code and Node.js + NPM for building it. We also make a symlink to the Node.js executable so it can be called with just <code>node</code> as some NPM packages’ install scripts rely on that:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>sudo apt-get install git nodejs npm
sudo ln -s /usr/bin/nodejs /usr/local/bin/node</code></pre></div><p>Then switch to the Docker user and clone the Git repository into a folder called <code>frontend</code>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>sudo su - docker
git clone https://github.com/kwk/docker-registry-frontend.git frontend</code></pre></div><p>Then enter the folder, install the Node.js and Bower packages and then build the site with Grunt:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>cd frontend/
npm install
node_modules/.bin/bower install
node_modules/.bin/grunt build</code></pre></div><p>The build files are then available inside the <code>/home/docker/frontend/dist/</code> folder. Before the site can be served we have to copy and adjust two JSON files containing some metadata the frontend need. The first one, <code>app-version.json</code>, can be generated like this:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>echo <span style=color:#e6db74>'{
</span><span style=color:#e6db74>    "git": {
</span><span style=color:#e6db74>        "sha1": "'</span><span style=color:#66d9ef>$(</span>git log --pretty<span style=color:#f92672>=</span>format:%h -n <span style=color:#ae81ff>1</span><span style=color:#66d9ef>)</span><span style=color:#e6db74>'",
</span><span style=color:#e6db74>        "ref": "'</span><span style=color:#66d9ef>$(</span>git branch | cut -c <span style=color:#ae81ff>3</span>-<span style=color:#66d9ef>)</span><span style=color:#e6db74>'"
</span><span style=color:#e6db74>    }
</span><span style=color:#e6db74>}'</span> &gt; dist/app-version.json</code></pre></div><p>The second file, <code>registry-host.json</code>, contain the hostname and port number of where the registry is located at, and is used to create copy/pastable <code>docker pull</code> commands in the web interface. Create a file at <code>dist/registry-host.json</code> and fill it out like this (adjust the hostname and port number as needed):</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json>{
    <span style=color:#f92672>"host"</span>: <span style=color:#e6db74>"docker.domain.com"</span>,
    <span style=color:#f92672>"port"</span>: <span style=color:#ae81ff>443</span>
}</code></pre></div><p>The last thing to do is to change our Nginx configuration to serve this interface. You can use this Nginx configuration and modify to suit you:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nginx data-lang=nginx><span style=color:#66d9ef>upstream</span> <span style=color:#e6db74>docker</span> { <span style=color:#f92672>server</span> 127.0.0.1:<span style=color:#ae81ff>5000</span>; }

<span style=color:#66d9ef>server</span> {
    <span style=color:#f92672>listen</span> <span style=color:#ae81ff>80</span>;
    <span style=color:#f92672>listen</span> <span style=color:#ae81ff>443</span> <span style=color:#e6db74>ssl</span>;

    <span style=color:#f92672>ssl_certificate</span> <span style=color:#e6db74>cert.pem</span>;
    <span style=color:#f92672>ssl_certificate_key</span> <span style=color:#e6db74>cert.key</span>;

    <span style=color:#f92672>client_max_body_size</span> <span style=color:#e6db74>500M</span>;
    <span style=color:#f92672>proxy_set_header</span> <span style=color:#e6db74>Host</span> $host;

    <span style=color:#f92672>auth_basic</span> <span style=color:#e6db74>"Docker</span> <span style=color:#e6db74>Registry"</span>;
    <span style=color:#f92672>auth_basic_user_file</span> <span style=color:#e6db74>/home/docker/auth</span>;

    <span style=color:#f92672>location</span> <span style=color:#e6db74>/</span> { <span style=color:#f92672>root</span> <span style=color:#e6db74>/home/docker/frontend/dist</span>; }

    <span style=color:#f92672>location</span> <span style=color:#e6db74>/v1</span> { <span style=color:#f92672>proxy_pass</span> <span style=color:#e6db74>http://docker</span>; }

    <span style=color:#75715e># Endpoints which are not requested with authentication
</span><span style=color:#75715e></span>    <span style=color:#f92672>location</span> <span style=color:#e6db74>/v1/_ping</span> { <span style=color:#f92672>proxy_pass</span> <span style=color:#e6db74>http://docker</span>; <span style=color:#f92672>auth_basic</span> <span style=color:#66d9ef>off</span>; }
    <span style=color:#f92672>location</span> <span style=color:#e6db74>/v1/search</span> { <span style=color:#f92672>proxy_pass</span> <span style=color:#e6db74>http://docker</span>; <span style=color:#f92672>auth_basic</span> <span style=color:#66d9ef>off</span>; }
}</code></pre></div><p>Then just reload the Nginx configuration with <code>sudo service nginx reload</code>, open the Docker registry website in a browser, input your credentials and there you have it.</p></div></div><footer>Copyright © 2018 <a href=https://twitter.com/Tenzer>Jeppe Toustrup</a> unless otherwise noted.</footer></body></html>